<div class="container-fluid py-4 px-4">

  <!-- ====================== CARTES DE STATS – CÔTE À CÔTE ====================== -->
  <div class="row g-4 mb-5">
    <div class="col-12 col-sm-6 col-lg-4 col-xl">
      <div class="stat-card bg-white shadow-sm border-0 rounded-3 overflow-hidden h-100">
        <div class="stat-icon bg-primary">
          <i class="fas fa-user-graduate fs-2"></i>
        </div>
        <div class="p-4">
          <h5 class="fw-bold text-dark mb-1">Étudiants</h5>
          <p class="display-5 fw-bold text-primary mb-0">{{ stats?.totalEtudiants || 0 }}</p>
          <small class="text-muted">Total inscrits</small>
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-4 col-xl">
      <div class="stat-card bg-white shadow-sm border-0 rounded-3 overflow-hidden h-100">
        <div class="stat-icon bg-success">
          <i class="fas fa-users fs-2"></i>
        </div>
        <div class="p-4">
          <h5 class="fw-bold text-dark mb-1">Clubs</h5>
          <p class="display-5 fw-bold text-success mb-0">{{ stats?.totalClubs || 0 }}</p>
          <small class="text-muted">Actifs cette année</small>
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-4 col-xl">
      <div class="stat-card bg-white shadow-sm border-0 rounded-3 overflow-hidden h-100">
        <div class="stat-icon bg-warning">
          <i class="fas fa-calendar-alt fs-2"></i>
        </div>
        <div class="p-4">
          <h5 class="fw-bold text-dark mb-1">Événements</h5>
          <p class="display-5 fw-bold text-warning mb-0">{{ stats?.totalEvenementsActifs || 0 }}</p>
          <small class="text-muted">En cours</small>
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-4 col-xl">
      <div class="stat-card bg-white shadow-sm border-0 rounded-3 overflow-hidden h-100">
        <div class="stat-icon bg-info">
          <i class="fas fa-donate fs-2"></i>
        </div>
        <div class="p-4">
          <h5 class="fw-bold text-dark mb-1">Dons collectés</h5>
          <p class="display-5 fw-bold text-info mb-0">{{ stats?.totalDons || 0 }} <small class="fs-4">DT</small></p>
          <small class="text-muted">Total cette année</small>
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-4 col-xl">
      <div class="stat-card bg-white shadow-sm border-0 rounded-3 overflow-hidden h-100">
        <div class="stat-icon bg-danger">
          <i class="fas fa-exclamation-circle fs-2"></i>
        </div>
        <div class="p-4">
          <h5 class="fw-bold text-dark mb-1">Réclamations</h5>
          <p class="display-5 fw-bold text-danger mb-0">{{ stats?.totalReclamations || 0 }}</p>
          <small class="text-muted">En attente de traitement</small>
        </div>
      </div>
    </div>
  </div>

  <!-- ====================== CALENDRIER + NOTES ====================== -->
  <div class="row g-5">

    <!-- CALENDRIER PERSONNALISÉ -->
    <div class="col-lg-8">
      <div class="card shadow border-0">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <i class="fas fa-calendar-week me-2"></i>
            {{ currentMonthName }} {{ currentYear }}
          </h5>
          <div>
            <button class="btn btn-sm btn-light me-2" (click)="previousMonth()">Précédent</button>
            <button class="btn btn-sm btn-light" (click)="nextMonth()">Suivant</button>
          </div>
        </div>
        <div class="card-body p-4">
          <div class="custom-calendar">
            <div class="calendar-header">
              <div class="day-name" *ngFor="let day of ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam']">
                {{ day }}
              </div>
            </div>
            <div class="calendar-body">
              <div class="calendar-day"
                   *ngFor="let day of calendarDays"
                   [class.empty]="!day"
                   [class.today]="isToday(day)"
                   [class.has-event]="hasEvent(day)">
                <div class="day-number">{{ day ? day.getDate() : '' }}</div>
                <div class="event-indicator" *ngIf="hasEvent(day)"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- NOTES RAPIDES -->
    <div class="col-lg-4">
      <div class="card shadow border-0 sticky-top" style="top: 20px;">
        <div class="card-header bg-warning text-dark">
          <h5 class="mb-0">Notes rapides</h5>
        </div>
        <div class="card-body bg-light">
          <textarea
            [(ngModel)]="adminNotes"
            (blur)="saveNotes()"
            class="form-control border-0 bg-transparent shadow-none"
            style="height: 420px; resize: none; font-family: 'Segoe UI', sans-serif; font-size: 15px; line-height: 1.8;"
            placeholder="Notes, rappels, tâches urgentes..."></textarea>
          <div class="mt-3 text-end">
            <small class="text-success fw-bold">
              Enregistré {{ lastSaved | date:'short' }}
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ACTIONS RAPIDES -->
  <div class="text-center mt-5">
    <div class="btn-group btn-group-lg" role="group">
      <a routerLink="/admin/compagne" class="btn btn-primary px-5 py-3">Nouvelle campagne</a>
      <a routerLink="/admin/evenements/create" class="btn btn-success px-5 py-3">Nouvel événement</a>
      <a routerLink="/admin/reclamations" class="btn btn-warning text-dark px-5 py-3">Réclamations</a>
    </div>
  </div>
</div>
