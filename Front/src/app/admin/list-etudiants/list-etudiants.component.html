<div class="p-6 bg-gray-50 rounded-lg shadow-md">
  <!-- Barre de recherche avec icône -->
  <div class="mb-6 flex flex-col sm:flex-row items-center gap-3">
    <div class="relative w-full sm:flex-1">
      <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
        <!-- Icon search -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
        </svg>
      </span>
      <input type="text" [(ngModel)]="searchTerm" (ngModelChange)="onSearch()"
        placeholder="Recherche par nom, prénom ou email"
        class="w-full border border-gray-300 rounded-lg px-10 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition" />
      @if (searchTerm) {
      <button (click)="clearSearch()"
        class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-full w-6 h-6 flex items-center justify-center transition"
        title="Effacer la recherche">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
      }
    </div>
  </div>

  <!-- Tableau responsive -->
  <div class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm text-lg">
      <thead class="bg-gray-100">
        <tr>
          <th class="text-left px-6 py-4 border-b text-gray-700 font-semibold">Nom</th>
          <th class="text-left px-6 py-4 border-b text-gray-700 font-semibold">Prénom</th>
          <th class="text-left px-6 py-4 border-b text-gray-700 font-semibold">Email</th>
          <th class="text-left px-6 py-4 border-b text-gray-700 font-semibold">Actions</th>

        </tr>
      </thead>
      <tbody>
        @for (e of etudiants; track $index) {

        <tr class="hover:bg-gray-50 transition duration-150">
          <td class="px-6 py-4 border-b">{{ e.firstName }}</td>
          <td class="px-6 py-4 border-b">{{ e.lastName }}</td>
          <td class="px-6 py-4 border-b">{{ e.email }}</td>
          <!-- Bouton Modifier rôle -->
<td class="px-6 py-4 border-b">
<button (click)="openRoleModal(e)"
        class="flex items-center justify-center px-6 py-3 bg-blue-500 text-white text-lg
               rounded-md  hover:bg-blue-600 hover:shadow-lg transition-all duration-300">
  Modifier rôle
</button>

</td>


        </tr>
        }
        @if (etudiants.length === 0) {

        <tr>
          <td colspan="3" class="text-center py-6 text-gray-500">Aucun étudiant trouvé</td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Pagination améliorée -->
  <div class="mt-6 flex flex-col sm:flex-row justify-between items-center gap-3">
    <div class="flex gap-2">
      <button (click)="prevPage()" [disabled]="page === 1"
        class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50 transition duration-200">
        Précédent
      </button>
      <button (click)="nextPage()" [disabled]="page === totalPages"
        class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50 transition duration-200">
        Suivant
      </button>
    </div>
    <span class="text-gray-700 text-lg">Page {{ page }} sur {{ totalPages }}</span>
  </div>
</div>
