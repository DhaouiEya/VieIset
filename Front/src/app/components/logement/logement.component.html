<!-- app.component.html -->

         <app-etudiant-banner [titre]="'Découvrez nos logements'" [description]="'Explorez les logements disponibles et trouvez votre prochain chez-vous.'"></app-etudiant-banner>

  <div class="main">


    <div class="grid">
      <!-- LISTE DES ANNONCES -->
      <section class="annonces">
        <div class="header">
          <h2>Mes Annonces</h2>
          <div class="count">{{ annonces.length }} logement{{ annonces.length > 1 ? 's' : '' }}</div>
        </div>

        <div class="cards">
          @for (annonce of paginatedAnnonces; track annonce._id) {
            <div class="card">
              <div class="glow-border"></div>
              <div class="badge">Nouveau</div>
              <h3>{{ annonce.titre }}</h3>
              <p>{{ annonce.description }}</p>
              <div class="footer">
                <small>{{ annonce.dateCreation | date:'dd MMM yyyy' }}</small>
                <button class="btn-view">Voir →</button>
              </div>
            </div>
          }

          @if (annonces.length === 0) {
            <div class="empty">
              <div class="icon">Home</div>
              <h3>Aucune annonce</h3>
              <p>Ajoutez votre premier logement</p>
            </div>
          }
        </div>

        <!-- PAGINATION -->
        @if (totalPages > 1) {
          <div class="pagination">
            <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">← Précédent</button>

            <div class="pages">
              @for (page of getPageNumbers(); track page) {
                <button [class.active]="page === currentPage" (click)="goToPage(page)">{{ page }}</button>
              }
            </div>

            <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">Suivant →</button>
          </div>
        }
      </section>

      <!-- FORMULAIRE -->
      <aside class="form-panel">
        <h2>Ajouter une annonce</h2>

        <form (ngSubmit)="onSubmit(f)" #f="ngForm">
          <div class="input-group">
            <input type="text" [(ngModel)]="newAnnonce.titre" name="titre" #titre="ngModel" required placeholder=" " />
            <label>Titre *</label>
            @if (titre.invalid && titre.touched) {
              <small class="error">Champ requis</small>
            }
          </div>

          <div class="input-group">
            <textarea [(ngModel)]="newAnnonce.description" name="description" #desc="ngModel" required rows="6" placeholder=" "></textarea>
            <label>Description détaillée *</label>
            @if (desc.invalid && desc.touched) {
              <small class="error">Champ requis</small>
            }
          </div>

          <button type="submit" class="btn-add" [disabled]="!f.valid">
            Ajouter le logement
          </button>
        </form>
      </aside>
    </div>
  </div>

  <app-footer></app-footer>


