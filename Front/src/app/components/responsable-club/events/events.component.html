<div class="c">
<div class="events-container mat-elevation-z2">
  <!-- Bande jaune avec bouton + -->
  <div class="header-bar">
    <h2>Liste des Ã‰vÃ©nements</h2>
    <button mat-icon-button class="bleuf">
      <mat-icon >add</mat-icon>
    </button>
  </div>

  <!-- Tableau des Ã©vÃ©nements -->
  <table class="events-table">
    <thead>
      <tr>
        <th>Titre</th>
        <th>Description</th>
        <th>Localisation</th>
        <th>Date dÃ©but</th>
        <th>Date fin</th>
        <th>CapacitÃ©</th>
        <th>Participants</th>
        <th>Image</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      @for (event of events; track $index) {
        <tr>
          <td>{{ event.title }}</td>
          <td class="truncate">{{ event.description }}</td>

          <td>{{ event.localisation }}</td>
          <td>{{ event.startDate | date: 'short' }} </td>
          <td>{{ event.endDate | date: 'short' }}</td>
          <td>{{ event.capacity || 0 }}</td>
         
          <td class="td-padding">
            <button mat-stroked-button class="view-btn" (click)="viewAttendees(event)" >
               <span class="btn-icon">ğŸ‘ï¸</span>
  <span style="font-size: 12px;">voir({{ event.attendees?.length || 0 }})</span>  
            </button>
          </td>
            <td class="td-padding">
          <button mat-stroked-button class="view-btn" (click)="opennewModal(event)" >
            ğŸ–¼ï¸ Voir
          </button>
        </td>
        <td class="action-buttons">
  <button mat-icon-button class="edit-btn" (click)="openUpdateEventDialog(event)">
    <mat-icon>edit</mat-icon>
  </button>
  <button mat-icon-button color="warn" (click)="deleteEvent(event)">
    <mat-icon>delete</mat-icon>
  </button>
</td>

        </tr>
      }
    </tbody>
  </table>

  <!-- Modal simple pour les participants -->
  @if (showModal) {
    <div class="modal-overlay">
      <div class="modal">
        <h3>Participants pour {{ selectedEvent?.title }}</h3>
        <ul>
          @for (attendee of selectedEvent?.attendees; track attendee.studentId) {
            <li>{{ attendee.lastName }} (ID: {{ attendee.studentId }})</li>
          }
        </ul>
        <button mat-raised-button color="primary" (click)="closeModal()">Fermer</button>
      </div>
    </div>
  }
@if(shownewmodal){
  <div class="modal-overlay" (click)="closenewModal()">
    <div class="image-modal" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closenewModal()">âœ•</button>
      <img [src]="'http://localhost:9000' + selectedEvent?.lienImage" 
           alt="{{selectedEvent?.title}}" class="event-image-preview">
    </div>
  </div>
}

</div>
</div> 









v
