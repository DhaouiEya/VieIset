<div class="c">
<div class="events-container mat-elevation-z2">
  <!-- Bande jaune avec bouton + -->
  <div class="header-bar">
    <h2>Liste des Ã‰vÃ©nements</h2>
    <button mat-icon-button color="primary" >
      <mat-icon>add</mat-icon>
    </button>
  </div>

  <!-- Tableau des Ã©vÃ©nements -->
  <table class="events-table">
    <thead>
      <tr>
        <th>Titre</th>
        <th>Description</th>
        <th>Localisation</th>
        <th>Dates</th>
        <th>CapacitÃ©</th>
        <th>Participants</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      @for (event of events; track $index) {
        <tr>
          <td>{{ event.title }}</td>
          <td>{{ event.description }}</td>
          <td>{{ event.localisation }}</td>
          <td>{{ event.startDate | date: 'short' }} - {{ event.endDate | date: 'short' }}</td>
          <td>{{ event.capacity || 0 }}</td>
          <td>
            <button mat-stroked-button color="primary" (click)="viewAttendees(event)" >
              ğŸ‘ï¸ Voir ({{ event.attendees?.length || 0 }})
            </button>
          </td>
          <td>
            <button mat-icon-button color="accent" (click)="openAddEventDialog(event)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="deleteEvent(event)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </tr>
      }
    </tbody>
  </table>

  <!-- Modal simple pour les participants -->
  @if (showModal) {
    <div class="modal-overlay">
      <div class="modal">
        <h3>Participants pour {{ selectedEvent?.title }}</h3>
        <ul>
          @for (attendee of selectedEvent?.attendees; track attendee.studentId) {
            <li>{{ attendee.lastName }} (ID: {{ attendee.studentId }})</li>
          }
        </ul>
        <button mat-raised-button color="primary" (click)="closeModal()">Fermer</button>
      </div>
    </div>
  }
</div>
</div>